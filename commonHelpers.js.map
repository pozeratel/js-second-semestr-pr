{"version":3,"file":"commonHelpers.js","sources":["../src/js/config.js","../src/js/fetchEvents.js","../src/js/events.js"],"sourcesContent":["export const URL = \"https://app.ticketmaster.com/discovery/v2/events.json\";\nexport const API_KEY = \"SD3dPZKqy7tpTs7VjSSru5mwqnGlbhOg\";\nexport const pages = 50","import { URL, API_KEY, pages } from \"./config.js\"\n\nexport default async function fetchEvents(page = 0) {\n    const response = await fetch(\n        `${URL}?apikey=${API_KEY}&page=${page}&size=20`\n    );\n\n    const data = await response.json();\n\n    return {\n        events: data._embedded?.events || [],\n        totalPages: data.page.totalPages,\n        currentPage: data.page.number   \n    };\n}","import fetchEvents from \"./fetchEvents\";\n\nconst listRef = document.querySelector(\".events_collections\");\nconst paginationRef = document.querySelector(\".pag_numbers\")\n\n\nasync function loadPage(page = 0) {\n    const { events, totalPages, currentPage } = await fetchEvents(page);\n\n    state.currentPage = currentPage;\n\n    state.totalPages = Math.min(totalPages, 50);\n\n    renderEvents(events);\n    pagginationLoad();\n    console.log(\"Events from API:\", events);\n}\n\nfunction renderEvents(events = []) {\n\n    if (!events.length) {\n        listRef.innerHTML = \"<p>No events</p>\";\n        return;\n    }\n\n    const html = events.map(({ images, name, dates, _embedded }) => {\n\n        const venue = _embedded?.venues?.[0];\n        const city = venue?.city?.name || \"\";\n        const address = venue?.address?.line1 || \"\";\n\n        const mapLink = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(\n            address + \" \" + city\n        )}`;\n\n        return `\n        <li class=\"events_item\">\n        <div class=\"overflow\"></div>\n            <img class=\"events_img\" src=\"${images?.[2]?.url}\" alt=\"${name}\" />\n            <h3 class=\"events_title\">${name}</h3>\n            <p class=\"events__date\">${dates?.start?.localDate || \"\"}</p>\n            <a class=\"event__link \" href=\"${mapLink}\">\n                ${city ? city + \", \" : \"\"}${address}\n            </a>\n        </li>\n        `;\n    }).join(\"\");\n\n    listRef.innerHTML = html;\n}\nrenderEvents();\n\n\nconst state = {\n    totalPages: 0,\n    currentPage: 0\n}\n\n\n\nfunction pagginationLoad() {\n    const { currentPage, totalPages } = state;\n    paginationRef.innerHTML = \"\";\n\n    const createButton = (page) => {\n        const btn = document.createElement(\"button\");\n        btn.textContent = page + 1;\n        btn.classList.add(\"page\")\n\n\n        if (page === currentPage) {\n            btn.classList.add(\"active\")\n        };\n\n        btn.addEventListener(\"click\", () => {\n            loadPage(page);\n        });\n\n        paginationRef.appendChild(btn);\n    }\n\n    const start = Math.max(0, currentPage - 2);\n    const end = Math.min(totalPages - 1, currentPage + 2);\n\n    if (start > 0) {\n        createButton(0);\n        paginationRef.appendChild(document.createTextNode(\"...\"));\n    }\n\n    for (let i = start; i <= end; i += 1) {\n        createButton(i);\n    }\n\n    if (end < totalPages - 1) {\n        paginationRef.append(\"...\");\n        createButton(totalPages - 1);\n    }\n}\n\n\nloadPage(0);\n"],"names":["URL","API_KEY","fetchEvents","page","data","_a","listRef","paginationRef","loadPage","events","totalPages","currentPage","state","renderEvents","pagginationLoad","html","images","name","dates","_embedded","venue","city","_b","address","_c","mapLink","_d","_e","createButton","btn","start","end","i"],"mappings":"ssBAAO,MAAMA,EAAM,wDACNC,EAAU,mCCCR,eAAeC,EAAYC,EAAO,EAAG,OAKhD,MAAMC,EAAO,MAJI,MAAM,MACnB,GAAGJ,CAAG,WAAWC,CAAO,SAASE,CAAI,UAC7C,GAEgC,OAE5B,MAAO,CACH,SAAQE,EAAAD,EAAK,YAAL,YAAAC,EAAgB,SAAU,CAAE,EACpC,WAAYD,EAAK,KAAK,WACtB,YAAaA,EAAK,KAAK,MAC/B,CACA,CCZA,MAAME,EAAU,SAAS,cAAc,qBAAqB,EACtDC,EAAgB,SAAS,cAAc,cAAc,EAG3D,eAAeC,EAASL,EAAO,EAAG,CAC9B,KAAM,CAAE,OAAAM,EAAQ,WAAAC,EAAY,YAAAC,CAAa,EAAG,MAAMT,EAAYC,CAAI,EAElES,EAAM,YAAcD,EAEpBC,EAAM,WAAa,KAAK,IAAIF,EAAY,EAAE,EAE1CG,EAAaJ,CAAM,EACnBK,IACA,QAAQ,IAAI,mBAAoBL,CAAM,CAC1C,CAEA,SAASI,EAAaJ,EAAS,GAAI,CAE/B,GAAI,CAACA,EAAO,OAAQ,CAChBH,EAAQ,UAAY,mBACpB,MACH,CAED,MAAMS,EAAON,EAAO,IAAI,CAAC,CAAE,OAAAO,EAAQ,KAAAC,EAAM,MAAAC,EAAO,UAAAC,KAAgB,eAE5D,MAAMC,GAAQf,EAAAc,GAAA,YAAAA,EAAW,SAAX,YAAAd,EAAoB,GAC5BgB,IAAOC,EAAAF,GAAA,YAAAA,EAAO,OAAP,YAAAE,EAAa,OAAQ,GAC5BC,IAAUC,EAAAJ,GAAA,YAAAA,EAAO,UAAP,YAAAI,EAAgB,QAAS,GAEnCC,EAAU,mDAAmD,mBAC/DF,EAAU,IAAMF,CACnB,CAAA,GAED,MAAO;AAAA;AAAA;AAAA,4CAG4BK,EAAAV,GAAA,YAAAA,EAAS,KAAT,YAAAU,EAAa,GAAG,UAAUT,CAAI;AAAA,uCAClCA,CAAI;AAAA,wCACLU,EAAAT,GAAA,YAAAA,EAAO,QAAP,YAAAS,EAAc,YAAa,EAAE;AAAA,4CACvBF,CAAO;AAAA,kBACjCJ,EAAOA,EAAO,KAAO,EAAE,GAAGE,CAAO;AAAA;AAAA;AAAA,SAInD,CAAK,EAAE,KAAK,EAAE,EAEVjB,EAAQ,UAAYS,CACxB,CACAF,IAGA,MAAMD,EAAQ,CACV,WAAY,EACZ,YAAa,CACjB,EAIA,SAASE,GAAkB,CACvB,KAAM,CAAE,YAAAH,EAAa,WAAAD,CAAY,EAAGE,EACpCL,EAAc,UAAY,GAE1B,MAAMqB,EAAgBzB,GAAS,CAC3B,MAAM0B,EAAM,SAAS,cAAc,QAAQ,EAC3CA,EAAI,YAAc1B,EAAO,EACzB0B,EAAI,UAAU,IAAI,MAAM,EAGpB1B,IAASQ,GACTkB,EAAI,UAAU,IAAI,QAAQ,EAG9BA,EAAI,iBAAiB,QAAS,IAAM,CAChCrB,EAASL,CAAI,CACzB,CAAS,EAEDI,EAAc,YAAYsB,CAAG,CAChC,EAEKC,EAAQ,KAAK,IAAI,EAAGnB,EAAc,CAAC,EACnCoB,EAAM,KAAK,IAAIrB,EAAa,EAAGC,EAAc,CAAC,EAEhDmB,EAAQ,IACRF,EAAa,CAAC,EACdrB,EAAc,YAAY,SAAS,eAAe,KAAK,CAAC,GAG5D,QAASyB,EAAIF,EAAOE,GAAKD,EAAKC,GAAK,EAC/BJ,EAAaI,CAAC,EAGdD,EAAMrB,EAAa,IACnBH,EAAc,OAAO,KAAK,EAC1BqB,EAAalB,EAAa,CAAC,EAEnC,CAGAF,EAAS,CAAC"}